Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _neo4jGraphqlJs=require('neo4j-graphql-js');var _requireAll=require('require-all');var _requireAll2=_interopRequireDefault(_requireAll);var _lodash=require('lodash');var _neo4j=require('./neo4j');var _Query=require('./type-definitions/Query');var _Query2=_interopRequireDefault(_Query);var _Mutation=require('./type-definitions/Mutation');var _Mutation2=_interopRequireDefault(_Mutation);var _mutations=require('./mutations');var _mutations2=_interopRequireDefault(_mutations);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var getResolverSchemaNames=function getResolverSchemaNames(schema){return(0,_lodash.isString)(schema)?schema.split('\n').map(function(q){return /([A-Za-z]+)(?=[:|(])[\s\S]*/mg.exec(q);},[]).filter(function(is){return is;}).map(function(match){return match[1];}):[];};var queryNames=getResolverSchemaNames(_Query2.default);var Query=queryNames.reduce(function(qs,q){return _extends({},qs,_defineProperty({},q,function(obj,args,cts,resolveInfo){return(0,_neo4jGraphqlJs.neo4jgraphql)(obj,args,cts,resolveInfo);}));},{});var mutationNames=getResolverSchemaNames(_Mutation2.default);console.log('mut names',mutationNames);var Mutation=mutationNames.reduce(function(ms,m){console.log('red mut',m,_mutations2.default[m]);if(m&&_mutations2.default[m]){return _extends({},ms,_defineProperty({},m,function(_,params){return(0,_neo4j.withSession)((0,_neo4j.createCypherMutation)(_mutations2.default[m])(params));}));}else{throw new Error("Mutations names must be consistent for schema and file where they are stored. Check for typos");}},{});exports.default={Query:Query,Mutation:Mutation};