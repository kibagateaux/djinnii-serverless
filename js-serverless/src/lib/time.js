'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports._findLastTime=exports._filterObjBetweenTimes=exports._filterObjByDay=exports._getFirstActivityInDay=exports._getFirstMSInDay=exports._sortByTime=exports._getTimesInUnix=exports._durationUnix=exports._formatToUnix=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _moment=require('moment');var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var dayInMicroSecs=24*60*60*1000;var _formatToUnix=exports._formatToUnix=function _formatToUnix(dateString){return(0,_moment2.default)(dateString).valueOf();};var _durationUnix=exports._durationUnix=function _durationUnix(start,end){return _formatToUnix(end)-_formatToUnix(start);};var _getTimesInUnix=exports._getTimesInUnix=function _getTimesInUnix(start,end){return{startTime:_formatToUnix(start),endTime:_formatToUnix(end),duration:_durationUnix(start,end)};};var _sortByTime=exports._sortByTime=function _sortByTime(obj){return Object.keys(obj).sort(function(x,y){return x-y;}).reduce(function(a,b){return isNaN(b)?a:_extends({},a,_defineProperty({},b,obj[b]));},{});};var _getFirstMSInDay=exports._getFirstMSInDay=function _getFirstMSInDay(timeMS){return(0,_moment2.default)((0,_moment2.default)(timeMS).format("YYYY-MM-DD 00:00:00.000")).valueOf();};var _getFirstActivityInDay=exports._getFirstActivityInDay=function _getFirstActivityInDay(time,obj){var startTime=_getFirstMSInDay(time);var endTime=startTime+dayInMicroSecs;var sortedActs=_sortByTime(obj);var times=Object.keys(sortedActs);var firstAct=void 0,i=0;while(!firstAct||i<=times.length){var actTime=times[i];if(actTime>startTime&&actTime<endTime){firstAct=_defineProperty({},actTime,obj[actTime]);break;}i++;}return firstAct;};var _filterObjByDay=exports._filterObjByDay=function _filterObjByDay(time,obj){var startTime=_getFirstMSInDay(time);var endTime=startTime+dayInMicroSecs;_filterObjBetweenTimes(startTime,endTime,obj);};var _filterObjBetweenTimes=exports._filterObjBetweenTimes=function _filterObjBetweenTimes(startTime,endTime,obj){return Object.keys(obj).filter(function(time){return time>startTime&&time<endTime;}).reduce(function(timeline,time){return _extends({},timeline,_defineProperty({},time,obj[time]));},{});};var _findLastTime=exports._findLastTime=function _findLastTime(data){return Object.keys(_sortByTime(data))[0];};