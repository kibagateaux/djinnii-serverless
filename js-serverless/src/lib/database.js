Object.defineProperty(exports,"__esModule",{value:true});exports.batchPut=exports.DB=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _awsSdk=require('aws-sdk');var _awsSdk2=_interopRequireDefault(_awsSdk);require('lodash/fp');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}_awsSdk2.default.config.update({region:"us-east-1"});var DB=exports.DB=new _awsSdk2.default.DynamoDB.DocumentClient();var batchPut=exports.batchPut=function batchPut(table){var items=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var userId=arguments[2];console.log('put',userId,items[0]);var request={RequestItems:_defineProperty({},table,items.map(function(obj){return{PutRequest:{Item:_extends({},obj,{userId:userId})}};}))};return new Promise(function(resolve,reject){return DB.batchWrite(request,function(error,data){console.log('batch write',error,data);error?reject(error):resolve(data);});});};